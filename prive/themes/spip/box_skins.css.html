[(#REM)

	Ce squelette définit les styles des boîtes de l'espace privé.

	Ce composant correspond aux balises #BOITE_OUVRIR et cie.

	L'entête et le pied sont optionnels.
	Les boîtes simples reprennent un style proche des formulaires.

	Organisation du fichier :

	0. Variables
	1. Layout et rythme vertical
	2. Base graphique commune
	3. Variantes principales
	4. Variantes d'états
	5. Autres variantes
	6. Cas particuliers
	7. Déprécations

	Markup :

	.box
	  .box__header
	  .box__body
	  .box__footer

<style>]
#CACHE{3600*100,cache-client}
#HTTP_HEADER{Content-Type: text/css; charset=utf-8}
#HTTP_HEADER{Vary: Accept-Encoding}


/**
 * ============
 * 0. Variables
 * ============
 */


/* Nb : la media-query au début sinon pb */
@media (min-width: 768px) {
	:root {
		--spip-box-iconsize: 32px;
		--spip-box-highlightsize: 1.5em;
	}
}
/* On reprend certaines valeurs des formulaires pour harmoniser */
:root {
	/* base pour les espacements internes */
	--spip-box-spacing-x: var(--spip-form-spacing-x);
	--spip-box-spacing-y: var(--spip-form-spacing-y);
	/* couleurs */
	--spip-box-sep-color: hsla(0, 0%, 0%, 0.125);
	--spip-box-border-color: hsla(0, 0%, 0%, 0.125); /* bordure basique */
	--spip-box-sep-color-inverse: hsla(0, 0%, 100%, 0.1);
	/* divers */
	--spip-box-border-radius: var(--spip-form-border-radius);
	--spip-box-iconsize: 24px;
	--spip-box-highlightsize: 1em; /* largeur bordure colorée sur boîtes d'états */
}
.lat .box,
.box.mini {
	--spip-box-iconsize: 24px;
	--spip-box-highlightsize: 1em;
	/* Obligé de reprendre à la main les mêmes valeurs que les forms */
	--spip-box-spacing-x: 0.75em;
	--spip-box-spacing-y: 0.75em;
}


/**
 * ============================
 * 1. Layout et rythme vertical
 * ============================
 */


.box,
.box * {
	box-sizing: border-box;
}

/* La marge externe doit être identique entre plusieurs composants (formulaires, …).
   Plus tard il faudra se baser sur spip-spacing-y quand ça sera au point.
   Pour l'instant on laisse la valeur historique. */
.box {
	position: relative;
	margin: calc(var(--spip-margin-bottom) * 1.5) 0;
}
/* Même padding partout, ajusté pour le footer */
.box__header, .box__body, .box__footer {
	position: relative;
	padding: var(--spip-box-spacing-y) var(--spip-box-spacing-x);
}
.box__footer {
	padding-top: calc(var(--spip-box-spacing-y) / 2);
	padding-bottom: calc(var(--spip-box-spacing-y) / 2);
}
/* Annuler marges inutiles au début et à la fin */
.box__body > :first-child,
.box__body > :first-child > :first-child {
	margin-top: 0;
}
.box__body > :last-child {
	margin-bottom: 0;
}
.box__header h1, .box__header h2, .box__header h3, .box__header h4, .box__header h5, .box__header h6 {
	margin-bottom: 0;
}
.box__footer .btn,
.box__footer button,
.box__footer .groupe-btns {
	margin-bottom: 0;
}


/**
 * =========================
 * 2. Base graphique commune
 * =========================
 */


/* Conteneur + obligé de reset les vieux messages d'alertes */
.box,
.box.notice, .box.error, .box.success {
	background: var(--spip-color-white);
	padding: 0;
	border-radius: var(--spip-box-border-radius);
	border: 0;
	box-shadow: var(--spip-box-shadow);
	color: var(--spip-color-black);
	transition: box-shadow 0.2s;
}
.box:hover,
.box:focus-within {
	box-shadow: var(--spip-box-shadow-hover);
}

/* Header */
.box__header {
	border-top-left-radius: inherit;
	border-top-right-radius: inherit;
	border-bottom: 1px solid var(--spip-box-sep-color);
}

/* Body : sans titre et/ou sans footer, ajuster l'arrondi */
.box__body:first-child {
	border-top-left-radius: var(--spip-box-border-radius);
	border-top-right-radius: var(--spip-box-border-radius);
}
.box__body:only-child {
	border-bottom-left-radius: var(--spip-box-border-radius);
	border-bottom-right-radius: var(--spip-box-border-radius);
}

/* Footer */
.box__footer {
	border-bottom-left-radius: inherit;
	border-bottom-right-radius: inherit;
	background-color: var(--spip-color-gray-lightest);
	text-align: var(--spip-right);
}

/* Titres
   Règle : si h3, c'est le style par défaut, et on mutualise avec les titres des formulaires (taille, graisse, …).
	 Si autre balise et qu'on veut forcer le style par défaut, utiliser la variante .titrem sur le header.  */
.box__header h3,
.box__header.titrem h1, .box__header.titrem h2, .box__header.titrem h3, .box__header.titrem h4, .box__header.titrem h5, .box__header.titrem h6,
.formulaire_spip .titrem {
	font-size: calc(1em * var(--spip-form-titrem-factor));
	font-weight: 800;
	/* color: var(--spip-color-theme-dark); */
}

/* En colonne latérale (+ voir variables au début) */
.lat .box {
	font-size: 0.95em;
}
.lat .box__header h1, .lat .box__header h2, .lat .box__header h3, .lat .box__header h4, .lat .box__header h5, .lat .box__header h6,
.lat .formulaire_spip .titrem  {
	font-size: 1em;
}


/**
 * ========================
 * 3. Variantes principales
 * ========================
 */


/* Simple */
.box.simple {
	background-color: var(--spip-color-white);
}

/* Info */
.box.info {
	border: 3px solid var(--spip-color-theme-light);
	background-color: var(--spip-color-white);
}

/* Note */
.box.note {
	border: 3px solid var(--spip-color-theme-lighter);
	background-color: var(--spip-color-theme-lightest);
}

/* Raccourcis */
.box.raccourcis {
	border-bottom: 1px solid hsla(0, 0%, 0%, 0.1);
	background-color: var(--spip-color-gray-lighter);
}

/* Important */
.box.important {
	border: 3px solid var(--spip-color-theme);
	background: var(--spip-color-white);
}

/* Highlight */
.box.highlight {
	background-color: var(--spip-color-theme-light);
}
.box.highlight .box_header {
	border-bottom-color: var(--spip-box-sep-color);
}
.box.highlight .box_header * {
	color: inherit;
}

/* Inverse */
.box.inverse {
	background-color: var(--spip-color-gray-darker);
	color: var(--spip-color-white);
}
.box.inverse .box__header {
	border-bottom-color: var(--spip-box-sep-color-inverse);
}
.box.inverse .box__header * {
	color: inherit;
}


/**
 * ====================
 * 4. Variantes d'états
 * ====================
 */


/* Icône centrée verticalement dans le header */
.box.notice .box__header, .box.error .box__header, .box.success .box__header,
.box.notice .box__body, .box.error .box__body, .box.success .box__body {
	background-repeat: no-repeat;
	background-size: var(--spip-box-iconsize);
	background-position: var(--spip-left) var(--spip-box-spacing-x) center;
}
/* Décommenter s'il faut centrer l'icône sur la 1ère ligne de texte dans le body */
/*.notice .box__body, .error .box__body, .success .box__body {
	background-position: var(--spip-left) var(--spip-box-spacing-x) top calc(var(--spip-box-spacing-y) - ((var(--spip-box-iconsize) - var(--spip-line-height)) / 2));
}*/
/* Espacement pour l'icône selon qu'elle soit dans le header ou dans le body */
.box.notice .box__header, .box.error .box__header, .box.success .box__header,
.box.notice .box__body:first-child, .box.error .box__body:first-child, .box.success .box__body:first-child {
	padding-#LEFT: calc(var(--spip-box-iconsize) + (var(--spip-box-spacing-x) * 2));
}
/* Bordure sur le côté */
.box.notice .box__header, .box.error .box__header, .box.success .box__header,
.box.notice .box__body, .box.error .box__body, .box.success .box__body,
.box.notice .box__footer, .box.error .box__footer, .box.success .box__footer {
	border-#LEFT: var(--spip-box-highlightsize) solid transparent;
}
/* Mini hack : sous le header on met la bordure basse en pseudo pour ne pas empiéter la bordure latérale colorée */
.box.notice .box__header, .box.error .box__header, .box.success .box__header {
	border-bottom: 0;
}
.box.notice .box__header:before, .box.error .box__header:before, .box.success .box__header:before {
	content: "";
	display: block;
	z-index: 2;
	position: absolute;
	left: 0;
	right: 0;
	bottom: 0;
	border-bottom: 1px solid var(--spip-box-sep-color);
}

/* Notice */
.box.notice .box__header,
.box.notice .box__body {
	border-#LEFT-color: hsl(var(--spip-color-notice--h), var(--spip-color-notice--s), 60%);
}
.box.notice .box__footer {
	border-#LEFT-color: hsl(var(--spip-color-notice--h), var(--spip-color-notice--s), 50%);
}
.box.notice .box__header,
.box.notice .box__body:first-child {
	background-image: url(#CHEMIN_IMAGE{warning-32.png});
}

/* Erreur */
.box.error .box__header,
.box.error .box__body {
	border-#LEFT-color: hsl(var(--spip-color-error--h), var(--spip-color-error--s), 60%);
}
.box.error .box__footer {
	border-#LEFT-color: hsl(var(--spip-color-error--h), var(--spip-color-error--s), 50%);
}
.box.error .box__header,
.box.error .box__body:first-child {
	background-image: url(#CHEMIN_IMAGE{erreur-32.png});
}

/* Succès */
.box.success .box__header,
.box.success .box__body {
	border-#LEFT-color: hsl(var(--spip-color-success--h), var(--spip-color-success--s), 55%);
}
.box.success .box__footer {
	border-#LEFT-color: hsl(var(--spip-color-success--h), var(--spip-color-success--s), 48%);
}
.box.success .box__header,
.box.success .box__body:first-child {
	background-image: url(#CHEMIN_IMAGE{ok-32.png});
}


/**
 * ===================
 * 5. Autres variantes
 * ===================
 */


/* Flat : sans ombre portée.
   Peut se conjuguer aux autres quand on veut forcer.
   Certaines le sont d'office, notamment les boîtes imbriquées.
	 Une bordure est ajoutée si nécessaire. */
.box.flat,
.box.info:not(.pop),
.box.note:not(.pop),
.box.important:not(.pop),
.box.raccourcis:not(.pop),
.box .box:not(.pop) /* imbriquées */
{
	box-shadow: none !important;
}
.box.simple.flat,
.box.notice.flat,
.box.error.flat,
.box.success.flat,
.box .box.simple:not(.pop), /* imbriquées */
.box .box.notice:not(.pop),
.box .box.error:not(.pop),
.box .box.success:not(.pop) {
	border: 1px solid var(--spip-box-border-color);
}

/* pop : avec une ombre portée.
   Peut se conjuguer aux autres quand on veut forcer */
.box.pop {
	box-shadow: var(--spip-box-shadow);
}
.box.pop:hover,
.box.pop:focus-within {
	box-shadow: var(--spip-box-shadow-hover);
}


/**
 * ===================
 * 6. Cas particuliers
 * ===================
 */


/**
 * Menu des rubriques dépliables sur la home
 * (voir aussi styles boîtes dépliables plus bas)
 */
.box.sous-rub {
	background-color: var(--spip-color-theme-lighter);
	box-shadow: none !important;
}
/* titre */
.box.sous-rub .box__header {
	padding: 0; /* padding dans le titre cliquable plutôt */
	border-bottom: 0;
}
.box.sous-rub .titrem.hover,
.box.sous-rub .titrem.deplie,
.box.sous-rub .titrem:hover,
.box.sous-rub .titrem:focus {
	background-color: var(--spip-color-theme-light);
}
.box.sous-rub .titrem.hover a,
.box.sous-rub .titrem.deplie a,
.box.sous-rub .titrem:hover a,
.box.sous-rub .titrem:focus a {
	color: var(--spip-color-theme-darker);
}
.box.sous-rub .titrem:not(.deplie):hover,
.box.sous-rub .titrem:not(.deplie):focus {
	border-radius: var(--spip-box-border-radius);
}
.box.sous-rub .box__header .logo {
	float: var(--spip-right);
	margin: 1px 5px 0;
	margin-#ENV{right}: -9px;
	z-index: 2;
	position: relative;
	border-top-#RIGHT-radius:5px;
}
/* Body */
.box.sous-rub .box__body {
	padding: 0;
	border-top: 0;
}
.box.sous-rub .descriptif {
	padding: 0px 10px 1px 16px;
	font-size: 0.95em;
}
.box.sous-rub a:hover {
	color: black;
}
.box.sous-rub .liste-items {
	font-size: 0.85em;
	line-height: 1.2;
	/* border-top: 1px solid var(--spip-box-sep-color); */
	border-top: 0;
}
.box.sous-rub .liste-items .item {
	padding: 0px;
	border-color: var(--spip-box-sep-color);
}
.box.sous-rub .liste-items .item a {
	display: block;
	padding: calc(var(--spip-box-spacing-y) / 2) calc(var(--spip-box-spacing-x) / 2);
}
.box.sous-rub .liste-items .item:hover {
	background-color: var(--spip-color-theme-light);
}
.box.sous-rub .liste-items > .item:last-child {
	border-bottom: 0;
}
.box.sous-rub .sous-sous-rub {
	margin-top: 0;
	margin-bottom: 0;
	padding-top: 0;
	padding-bottom: 0;
}


/**
 * ===============
 * 7. Déprécations
 * ===============
 * Vieilles boîtes dépliables/repliables encore maintenues mais dépréciées
 * Exemple : menu des rubriques dépliables sur la home (utilisé ailleurs ?)
 */

/* Titre
   - init :   .replie
   - déplié : .depliant.deplie
   - replié : .depliant.replie */
.box .titrem.replie,
.box .titrem.depliant,
.box .titrem.impliable
 {
	display: block;
	font-size: 1em;
	line-height: 1.25;
	padding: calc(var(--spip-box-spacing-y) / 2) calc(var(--spip-box-spacing-x) / 2);
	background-repeat: no-repeat;
	border-radius: inherit;
}
.box .titrem.impliable .titremancre {
	display: none;
}

/* Picto déplier / Replier */
.box .titremancre {
	display: inline-block;
	position: relative;
	width: 1em;
	height: 1em;
	float: var(--spip-left);
	margin-#RIGHT: calc(var(--spip-box-spacing-x) / 3);
	background-position: center center;
	background-repeat: no-repeat;
}
.box .replie .titremancre {
	background-image: url([(#CHEMIN_IMAGE{deplierhaut[(#ENV{rtl})].gif})]);
}
.box .deplie .titremancre {
	background-image: url(#CHEMIN_IMAGE{deplierbas.gif});
}
/* Afficher / Masquer */
.js .box .blocreplie {
	display: none;
}
.js .box .titrem.blocreplie {
	display: block;
}
.box .blocdeplie {
	display: block;
	background: none;
}
.box .bloc_depliable .pagination {
	white-space: normal;
}
